<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warehouse Inventory Management</title>
    <style>
        /* Reset and base styles */
        *, *::before, *::after {
            box-sizing: border-box;
        }
        
        * {
            margin: 0;
        }
        
        body {
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: hsl(0 0% 98%);
            color: hsl(0 0% 9%);
        }
        
        img, picture, video, canvas, svg {
            display: block;
            max-width: 100%;
        }
        
        input, button, textarea, select {
            font: inherit;
        }
        
        p, h1, h2, h3, h4, h5, h6 {
            overflow-wrap: break-word;
        }
        
        /* CSS Variables */
        :root {
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
        }
        
        /* Utility classes */
        .hidden { display: none; }
        .block { display: block; }
        .flex { display: flex; }
        .inline-flex { display: inline-flex; }
        .grid { display: grid; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .justify-end { justify-content: flex-end; }
        .gap-2 { gap: 0.5rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .w-full { width: 100%; }
        .w-fit { width: fit-content; }
        .w-24 { width: 6rem; }
        .w-32 { width: 8rem; }
        .h-10 { height: 2.5rem; }
        .h-11 { height: 2.75rem; }
        .h-9 { height: 2.25rem; }
        .h-auto { height: auto; }
        .min-h-screen { min-height: 100vh; }
        .max-w-md { max-width: 28rem; }
        .max-w-4xl { max-width: 56rem; }
        .max-w-6xl { max-width: 72rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .my-8 { margin-top: 2rem; margin-bottom: 2rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .rounded-md { border-radius: 0.375rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .border { border-width: 1px; }
        .border-2 { border-width: 2px; }
        .bg-white { background-color: hsl(var(--background)); }
        .bg-primary { background-color: hsl(var(--primary)); }
        .bg-secondary { background-color: hsl(var(--secondary)); }
        .bg-muted { background-color: hsl(var(--muted)); }
        .bg-destructive { background-color: hsl(var(--destructive)); }
        .bg-orange-100 { background-color: hsl(24 100% 95%); }
        .bg-red-100 { background-color: hsl(0 100% 95%); }
        .text-primary { color: hsl(var(--primary)); }
        .text-primary-foreground { color: hsl(var(--primary-foreground)); }
        .text-secondary-foreground { color: hsl(var(--secondary-foreground)); }
        .text-muted-foreground { color: hsl(var(--muted-foreground)); }
        .text-destructive { color: hsl(var(--destructive)); }
        .text-destructive-foreground { color: hsl(var(--destructive-foreground)); }
        .text-orange-800 { color: hsl(24 100% 25%); }
        .text-red-800 { color: hsl(0 100% 25%); }
        .border-input { border-color: hsl(var(--input)); }
        .border-orange-200 { border-color: hsl(24 100% 85%); }
        .border-red-200 { border-color: hsl(0 100% 85%); }
        .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .shadow-md { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .cursor-pointer { cursor: pointer; }
        .hover\:bg-secondary:hover { background-color: hsl(var(--secondary)); }
        .hover\:bg-primary\/90:hover { background-color: hsl(var(--primary) / 0.9); }
        .hover\:bg-destructive\/90:hover { background-color: hsl(var(--destructive) / 0.9); }
        .hover\:bg-accent:hover { background-color: hsl(var(--accent)); }
        .focus\:outline-none:focus { outline: 2px solid transparent; outline-offset: 2px; }
        .focus\:ring-2:focus { box-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color); }
        .focus\:ring-ring:focus { --tw-ring-color: hsl(var(--ring)); }
        .focus\:ring-offset-2:focus { --tw-ring-offset-width: 2px; }
        .disabled\:pointer-events-none:disabled { pointer-events: none; }
        .disabled\:opacity-50:disabled { opacity: 0.5; }
        .transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        
        /* Component styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            white-space: nowrap;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: color, background-color, border-color, text-decoration-color, fill, stroke 150ms cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: none;
            height: 2.5rem;
            padding: 0.5rem 1rem;
        }
        
        .btn:focus-visible {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px hsl(var(--ring));
        }
        
        .btn:disabled {
            pointer-events: none;
            opacity: 0.5;
        }
        
        .btn-primary {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }
        
        .btn-primary:hover {
            background-color: hsl(var(--primary) / 0.9);
        }
        
        .btn-secondary {
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
        }
        
        .btn-secondary:hover {
            background-color: hsl(var(--secondary) / 0.8);
        }
        
        .btn-destructive {
            background-color: hsl(var(--destructive));
            color: hsl(var(--destructive-foreground));
        }
        
        .btn-destructive:hover {
            background-color: hsl(var(--destructive) / 0.9);
        }
        
        .btn-outline {
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
        }
        
        .btn-outline:hover {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
        }
        
        .input {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: color, background-color, border-color, text-decoration-color, fill, stroke 150ms cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .input:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px hsl(var(--ring));
        }
        
        .input:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .textarea {
            display: flex;
            min-height: 5rem;
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: color, background-color, border-color, text-decoration-color, fill, stroke 150ms cubic-bezier(0.4, 0, 0.2, 1);
            resize: none;
        }
        
        .textarea:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px hsl(var(--ring));
        }
        
        .select {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            transition: color, background-color, border-color, text-decoration-color, fill, stroke 150ms cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .select:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px hsl(var(--ring));
        }
        
        .card {
            border-radius: 0.5rem;
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--card));
            color: hsl(var(--card-foreground));
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        
        .table {
            width: 100%;
            caption-side: bottom;
            font-size: 0.875rem;
        }
        
        .table th {
            height: 3rem;
            padding: 0.75rem;
            text-align: left;
            font-weight: 500;
            color: hsl(var(--muted-foreground));
            border-bottom: 1px solid hsl(var(--border));
        }
        
        .table td {
            padding: 0.75rem;
            border-bottom: 1px solid hsl(var(--border));
        }
        
        .table tbody tr {
            border-bottom: 1px solid hsl(var(--border));
            transition: color, background-color, border-color, text-decoration-color, fill, stroke 150ms cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .table tbody tr:hover {
            background-color: hsl(var(--muted) / 0.5);
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            border-radius: 9999px;
            padding: 0.125rem 0.625rem;
            font-size: 0.75rem;
            font-weight: 600;
            line-height: 1;
            border: 1px solid transparent;
        }
        
        .badge-default {
            border-color: transparent;
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }
        
        .badge-destructive {
            border-color: transparent;
            background-color: hsl(var(--destructive));
            color: hsl(var(--destructive-foreground));
        }
        
        .badge-secondary {
            border-color: transparent;
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
        }
        
        .modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 50;
            background-color: rgb(0 0 0 / 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal-content {
            position: relative;
            max-width: 32rem;
            width: 100%;
            border-radius: 0.5rem;
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            padding: 1.5rem 1.5rem 0;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            padding: 0 1.5rem 1.5rem;
        }
        
        .alert {
            position: relative;
            width: 100%;
            border-radius: 0.5rem;
            border: 1px solid hsl(var(--border));
            padding: 1rem;
        }
        
        .alert-destructive {
            border-color: hsl(var(--destructive) / 0.5);
            color: hsl(var(--destructive));
            background-color: hsl(var(--destructive) / 0.1);
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        @media (max-width: 768px) {
            .md\:grid-cols-3 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
            
            .table {
                font-size: 0.75rem;
            }
            
            .table th,
            .table td {
                padding: 0.5rem;
            }
        }
        
        @media (min-width: 768px) {
            .md\:grid-cols-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Login Page -->
        <div id="loginPage" class="min-h-screen flex items-center justify-center bg-secondary p-4">
            <div class="card w-full max-w-md">
                <div class="p-6 space-y-6">
                    <div class="text-center">
                        <h1 class="text-3xl font-bold">Warehouse Management</h1>
                        <p class="text-muted-foreground mt-2">Enter password to access inventory</p>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="password" class="text-sm font-medium">Password</label>
                            <input 
                                type="password" 
                                id="password" 
                                class="input mt-2" 
                                placeholder="Enter password"
                            >
                            <div id="loginError" class="text-destructive text-sm mt-2 hidden">Incorrect password</div>
                        </div>
                        <button id="loginBtn" class="btn btn-primary w-full">
                            Access Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="hidden min-h-screen bg-secondary">
            <div class="max-w-6xl mx-auto p-6">
                <!-- Header -->
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-3xl font-bold">Warehouse Inventory Management</h1>
                    <button id="logoutBtn" class="btn btn-outline">Logout</button>
                </div>

                <!-- Loading State -->
                <div id="loading" class="text-center py-8">
                    <div class="text-lg">Loading inventory...</div>
                </div>

                <!-- Main Content -->
                <div id="mainContent" class="hidden space-y-6">
                    <!-- Summary Cards -->
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="card p-6">
                            <h3 class="font-semibold text-muted-foreground">Total Unique Items</h3>
                            <p id="totalItems" class="text-2xl font-bold">0</p>
                        </div>
                        <div class="card p-6">
                            <h3 class="font-semibold text-muted-foreground">Total Quantity</h3>
                            <p id="totalQuantity" class="text-2xl font-bold">0</p>
                        </div>
                        <div class="card p-6">
                            <h3 class="font-semibold text-muted-foreground">Low Stock Items</h3>
                            <p id="lowStockCount" class="text-2xl font-bold text-destructive">0</p>
                        </div>
                    </div>

                    <!-- Actions Bar -->
                    <div class="flex flex-col md:flex-row gap-4 justify-between items-start md:items-center">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="input max-w-md" 
                            placeholder="Search by item name, SKU, or category..."
                        >
                        <div class="flex gap-2">
                            <button id="addItemBtn" class="btn btn-primary">Add Item</button>
                            <button id="transactionBtn" class="btn btn-secondary">Record Transaction</button>
                        </div>
                    </div>

                    <!-- Low Stock Alert -->
                    <div id="lowStockAlert" class="hidden alert alert-destructive">
                        <h4 class="font-medium mb-2">⚠️ Low Stock Alert</h4>
                        <p class="text-sm">The following items are below their reorder level:</p>
                        <ul id="lowStockList" class="text-sm mt-2 space-y-1"></ul>
                    </div>

                    <!-- Inventory Table -->
                    <div class="card">
                        <div class="p-6">
                            <h2 class="text-xl font-semibold mb-4">Inventory Items</h2>
                            <div class="overflow-x-auto">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th class="cursor-pointer" data-sort="image_url">Picture</th>
                                            <th class="cursor-pointer" data-sort="sku">SKU/ID</th>
                                            <th class="cursor-pointer" data-sort="item_name">Item Name</th>
                                            <th class="cursor-pointer" data-sort="entity">Entity</th>
                                            <th class="cursor-pointer" data-sort="quantity_counted">Quantity</th>
                                            <th class="cursor-pointer" data-sort="category">Category</th>
                                            <th class="cursor-pointer" data-sort="last_count_date">Last Count</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="inventoryTableBody">
                                        <tr>
                                            <td colspan="8" class="text-center py-8 text-muted-foreground">
                                                No inventory items found
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Transaction History -->
                    <div class="card">
                        <div class="p-6">
                            <h2 class="text-xl font-semibold mb-4">Recent Transactions</h2>
                            <div class="overflow-x-auto">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Item</th>
                                            <th>Type</th>
                                            <th>Quantity</th>
                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transactionTableBody">
                                        <tr>
                                            <td colspan="5" class="text-center py-8 text-muted-foreground">
                                                No transactions recorded
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Item Form Modal -->
        <div id="itemModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle" class="text-xl font-semibold">Add Item</h2>
                </div>
                <div class="modal-body">
                    <form id="itemForm" class="space-y-4">
                        <div>
                            <label for="itemSku" class="text-sm font-medium">SKU/Item ID (Optional)</label>
                            <input type="text" id="itemSku" class="input mt-1">
                        </div>
                        
                        <div>
                            <label for="itemName" class="text-sm font-medium">Item Name *</label>
                            <input type="text" id="itemName" class="input mt-1" required>
                            <div id="itemNameError" class="text-destructive text-sm mt-1 hidden">Item name is required</div>
                        </div>
                        
                        <div>
                            <label for="itemEntity" class="text-sm font-medium">Entity *</label>
                            <select id="itemEntity" class="select mt-1" required>
                                <option value="">Select Entity</option>
                                <option value="Volunteer.Krd">Volunteer.Krd</option>
                                <option value="Climate.Krd">Climate.Krd</option>
                                <option value="Jobs.Krd">Jobs.Krd</option>
                                <option value="Empower.Krd">Empower.Krd</option>
                            </select>
                            <div id="itemEntityError" class="text-destructive text-sm mt-1 hidden">Entity is required</div>
                        </div>
                        
                        <div>
                            <label for="itemQuantity" class="text-sm font-medium">Quantity Counted *</label>
                            <input type="number" id="itemQuantity" class="input mt-1" min="0" required>
                            <div id="itemQuantityError" class="text-destructive text-sm mt-1 hidden">Quantity is required and must be 0 or greater</div>
                        </div>
                        
                        <div>
                            <label for="itemCategory" class="text-sm font-medium">Category *</label>
                            <select id="itemCategory" class="select mt-1" required>
                                <option value="">Select Category</option>
                                <option value="Rollup">Rollup</option>
                                <option value="Flex">Flex</option>
                                <option value="Beach flag">Beach flag</option>
                                <option value="Table flag">Table flag</option>
                                <option value="Presidential flag">Presidential flag</option>
                                <option value="Cups">Cups</option>
                                <option value="Tshirts">Tshirts</option>
                                <option value="Hats">Hats</option>
                                <option value="Badges">Badges</option>
                                <option value="Pins">Pins</option>
                                <option value="Flyers">Flyers</option>
                                <option value="Miscellaneous">Miscellaneous</option>
                                <option value="Podiums">Podiums</option>
                                <option value="custom">Add Custom Category</option>
                            </select>
                            <input type="text" id="customCategory" class="input mt-2 hidden" placeholder="Enter custom category">
                            <div id="itemCategoryError" class="text-destructive text-sm mt-1 hidden">Category is required</div>
                        </div>
                        
                        <div>
                            <label for="itemUnit" class="text-sm font-medium">Unit of Measure (Optional)</label>
                            <input type="text" id="itemUnit" class="input mt-1" placeholder="e.g., pcs, boxes, pairs">
                        </div>
                        
                        <div>
                            <label for="itemLocation" class="text-sm font-medium">Location in Warehouse (Optional)</label>
                            <input type="text" id="itemLocation" class="input mt-1" placeholder="e.g., Aisle 1, Shelf 3">
                        </div>
                        
                        <div>
                            <label for="itemReorderLevel" class="text-sm font-medium">Reorder Level *</label>
                            <input type="number" id="itemReorderLevel" class="input mt-1" min="0" required>
                            <div id="itemReorderLevelError" class="text-destructive text-sm mt-1 hidden">Reorder level is required and must be 0 or greater</div>
                        </div>
                        
                        <div>
                            <label for="itemSupplier" class="text-sm font-medium">Supplier (Optional)</label>
                            <input type="text" id="itemSupplier" class="input mt-1">
                        </div>
                        
                        <div>
                            <label for="itemNotes" class="text-sm font-medium">Condition/Notes (Optional)</label>
                            <textarea id="itemNotes" class="textarea mt-1" placeholder="Additional notes or condition details"></textarea>
                        </div>
                        
                        <div>
                            <label for="itemImage" class="text-sm font-medium">Item Picture URL (Optional)</label>
                            <input type="url" id="itemImage" class="input mt-1" placeholder="https://example.com/image.jpg">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancelBtn" class="btn btn-outline">Cancel</button>
                    <button type="submit" form="itemForm" id="submitBtn" class="btn btn-primary">Add Item</button>
                </div>
            </div>
        </div>

        <!-- Transaction Form Modal -->
        <div id="transactionModal" class="modal-overlay hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="text-xl font-semibold">Record Transaction</h2>
                </div>
                <div class="modal-body">
                    <form id="transactionForm" class="space-y-4">
                        <div>
                            <label for="transactionItem" class="text-sm font-medium">Item *</label>
                            <select id="transactionItem" class="select mt-1" required>
                                <option value="">Select Item</option>
                            </select>
                            <div id="transactionItemError" class="text-destructive text-sm mt-1 hidden">Item is required</div>
                        </div>
                        
                        <div>
                            <label for="transactionType" class="text-sm font-medium">Transaction Type *</label>
                            <select id="transactionType" class="select mt-1" required>
                                <option value="">Select Type</option>
                                <option value="put_in">Put In (Add to warehouse)</option>
                                <option value="take_out">Take Out (Remove from warehouse)</option>
                            </select>
                            <div id="transactionTypeError" class="text-destructive text-sm mt-1 hidden">Transaction type is required</div>
                        </div>
                        
                        <div>
                            <label for="transactionQuantity" class="text-sm font-medium">Quantity *</label>
                            <input type="number" id="transactionQuantity" class="input mt-1" min="1" required>
                            <div id="transactionQuantityError" class="text-destructive text-sm mt-1 hidden">Quantity is required and must be greater than 0</div>
                        </div>
                        
                        <div>
                            <label for="transactionNotes" class="text-sm font-medium">Notes (Optional)</label>
                            <textarea id="transactionNotes" class="textarea mt-1" placeholder="Additional notes about this transaction"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancelTransactionBtn" class="btn btn-outline">Cancel</button>
                    <button type="submit" form="transactionForm" id="submitTransactionBtn" class="btn btn-primary">Record Transaction</button>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="modal-overlay hidden">
            <div class="modal-content max-w-md">
                <div class="modal-header">
                    <h2 class="text-xl font-semibold">Confirm Deletion</h2>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this item? This action cannot be undone.</p>
                    <p class="mt-2"><strong id="deleteItemName"></strong></p>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancelDeleteBtn" class="btn btn-outline">Cancel</button>
                    <button type="button" id="confirmDeleteBtn" class="btn btn-destructive">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let isLoggedIn = false;
        let items = [];
        let transactions = [];
        let filteredItems = [];
        let editingItem = null;
        let deleteItemId = null;
        let sortField = 'item_name';
        let sortDirection = 'asc';

        // Constants
        const CORRECT_PASSWORD = 'Zxzx1212zxzX';
        const STORAGE_KEY = 'warehouseInventory';
        const TRANSACTIONS_KEY = 'warehouseTransactions';

        // Sample data
        const sampleItems = [
            {
                id: '1',
                sku: 'VK-ROLL-001',
                item_name: 'Volunteer.Krd Rollup Banner',
                entity: 'Volunteer.Krd',
                quantity_counted: 15,
                unit_of_measure: 'pcs',
                location_in_warehouse: 'Aisle 1, Shelf A',
                category: 'Rollup',
                condition_notes: 'Good condition',
                last_count_date: '2024-01-15',
                reorder_level: 5,
                supplier: 'Banner Pro',
                image_url: ''
            },
            {
                id: '2',
                sku: 'CK-TSHIRT-002',
                item_name: 'Climate.Krd T-Shirts',
                entity: 'Climate.Krd',
                quantity_counted: 3,
                unit_of_measure: 'pcs',
                location_in_warehouse: 'Aisle 2, Shelf B',
                category: 'Tshirts',
                condition_notes: 'Various sizes available',
                last_count_date: '2024-01-14',
                reorder_level: 10,
                supplier: 'Textile Works',
                image_url: ''
            }
        ];

        // Utility functions
        function generateId() {
            return Date.now().toString() + Math.random().toString(36).substr(2, 9);
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            return new Date(dateString).toLocaleDateString();
        }

        function isLowStock(item) {
            return item.quantity_counted < item.reorder_level;
        }

        function saveToStorage() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
            localStorage.setItem(TRANSACTIONS_KEY, JSON.stringify(transactions));
        }

        function loadFromStorage() {
            const storedItems = localStorage.getItem(STORAGE_KEY);
            const storedTransactions = localStorage.getItem(TRANSACTIONS_KEY);
            
            if (storedItems) {
                items = JSON.parse(storedItems);
            } else {
                items = [...sampleItems];
                saveToStorage();
            }
            
            if (storedTransactions) {
                transactions = JSON.parse(storedTransactions);
            }
        }

        // Authentication
        function handleLogin() {
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');
            
            if (password === CORRECT_PASSWORD) {
                isLoggedIn = true;
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                loadInventory();
                errorDiv.classList.add('hidden');
            } else {
                errorDiv.classList.remove('hidden');
            }
        }

        function handleLogout() {
            isLoggedIn = false;
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('password').value = '';
        }

        // Data loading
        function loadInventory() {
            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('mainContent').classList.add('hidden');
            
            setTimeout(() => {
                loadFromStorage();
                updateFilteredItems();
                updateSummaryStats();
                renderInventoryTable();
                renderTransactionHistory();
                renderLowStockAlert();
                updateTransactionItemOptions();
                
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('mainContent').classList.remove('hidden');
            }, 500);
        }

        function updateFilteredItems() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            filteredItems = items.filter(item => 
                item.item_name.toLowerCase().includes(searchTerm) ||
                (item.sku && item.sku.toLowerCase().includes(searchTerm)) ||
                item.category.toLowerCase().includes(searchTerm) ||
                item.entity.toLowerCase().includes(searchTerm)
            );
            
            // Sort items
            filteredItems.sort((a, b) => {
                let aVal = a[sortField] || '';
                let bVal = b[sortField] || '';
                
                if (sortField === 'quantity_counted' || sortField === 'reorder_level') {
                    aVal = parseInt(aVal) || 0;
                    bVal = parseInt(bVal) || 0;
                } else if (sortField === 'last_count_date') {
                    aVal = new Date(aVal || '1970-01-01').getTime();
                    bVal = new Date(bVal || '1970-01-01').getTime();
                } else {
                    aVal = aVal.toString().toLowerCase();
                    bVal = bVal.toString().toLowerCase();
                }
                
                if (sortDirection === 'asc') {
                    return aVal < bVal ? -1 : aVal > bVal ? 1 : 0;
                } else {
                    return aVal > bVal ? -1 : aVal < bVal ? 1 : 0;
                }
            });
        }

        function updateSummaryStats() {
            const totalItems = items.length;
            const totalQuantity = items.reduce((sum, item) => sum + (item.quantity_counted || 0), 0);
            const lowStockItems = items.filter(isLowStock).length;
            
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('totalQuantity').textContent = totalQuantity;
            document.getElementById('lowStockCount').textContent = lowStockItems;
        }

        // Table rendering
        function renderInventoryTable() {
            const tbody = document.getElementById('inventoryTableBody');
            
            if (filteredItems.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center py-8 text-muted-foreground">
                            No inventory items found
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = filteredItems.map(item => {
                const lowStock = isLowStock(item);
                return `
                    <tr class="${lowStock ? 'bg-orange-100 border-orange-200' : ''}">
                        <td>
                            ${item.image_url ? 
                                `<img src="${item.image_url}" alt="${item.item_name}" class="w-24 h-auto rounded-md">` : 
                                '<div class="w-24 h-16 bg-muted rounded-md flex items-center justify-center text-muted-foreground text-sm">No Image</div>'
                            }
                        </td>
                        <td>${item.sku || 'N/A'}</td>
                        <td class="font-medium">${item.item_name}</td>
                        <td>${item.entity}</td>
                        <td>
                            <div class="flex items-center gap-2">
                                ${item.quantity_counted || 0} ${item.unit_of_measure || ''}
                                ${lowStock ? '<span class="badge badge-destructive">Low Stock</span>' : ''}
                            </div>
                        </td>
                        <td>${item.category}</td>
                        <td>${formatDate(item.last_count_date)}</td>
                        <td>
                            <div class="flex gap-2">
                                <button class="btn btn-outline btn-sm" onclick="openEditForm('${item.id}')">Edit</button>
                                <button class="btn btn-destructive btn-sm" onclick="openDeleteModal('${item.id}')">Delete</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function renderTransactionHistory() {
            const tbody = document.getElementById('transactionTableBody');
            
            if (transactions.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center py-8 text-muted-foreground">
                            No transactions recorded
                        </td>
                    </tr>
                `;
                return;
            }
            
            const recentTransactions = transactions.slice(-10).reverse();
            
            tbody.innerHTML = recentTransactions.map(transaction => {
                const item = items.find(i => i.id === transaction.itemId);
                return `
                    <tr>
                        <td>${formatDate(transaction.date)}</td>
                        <td>${item ? item.item_name : 'Unknown Item'}</td>
                        <td>
                            <span class="badge ${transaction.type === 'put_in' ? 'badge-secondary' : 'badge-destructive'}">
                                ${transaction.type === 'put_in' ? 'Put In' : 'Take Out'}
                            </span>
                        </td>
                        <td>${transaction.quantity}</td>
                        <td>${transaction.notes || 'N/A'}</td>
                    </tr>
                `;
            }).join('');
        }

        function renderLowStockAlert() {
            const lowStockItems = items.filter(isLowStock);
            const alertDiv = document.getElementById('lowStockAlert');
            const listDiv = document.getElementById('lowStockList');
            
            if (lowStockItems.length === 0) {
                alertDiv.classList.add('hidden');
                return;
            }
            
            alertDiv.classList.remove('hidden');
            listDiv.innerHTML = lowStockItems.map(item => 
                `<li>• ${item.item_name} (${item.quantity_counted}/${item.reorder_level})</li>`
            ).join('');
        }

        function updateTransactionItemOptions() {
            const select = document.getElementById('transactionItem');
            select.innerHTML = '<option value="">Select Item</option>' + 
                items.map(item => 
                    `<option value="${item.id}">${item.item_name} (${item.entity})</option>`
                ).join('');
        }

        // Form handling
        function openAddForm() {
            editingItem = null;
            document.getElementById('modalTitle').textContent = 'Add Item';
            document.getElementById('submitBtn').textContent = 'Add Item';
            document.getElementById('itemForm').reset();
            document.getElementById('customCategory').classList.add('hidden');
            clearFormErrors();
            document.getElementById('itemModal').classList.remove('hidden');
        }

        function openEditForm(itemId) {
            editingItem = items.find(item => item.id === itemId);
            if (!editingItem) return;
            
            document.getElementById('modalTitle').textContent = 'Edit Item';
            document.getElementById('submitBtn').textContent = 'Update Item';
            
            // Populate form
            document.getElementById('itemSku').value = editingItem.sku || '';
            document.getElementById('itemName').value = editingItem.item_name || '';
            document.getElementById('itemEntity').value = editingItem.entity || '';
            document.getElementById('itemQuantity').value = editingItem.quantity_counted || '';
            document.getElementById('itemCategory').value = editingItem.category || '';
            document.getElementById('itemUnit').value = editingItem.unit_of_measure || '';
            document.getElementById('itemLocation').value = editingItem.location_in_warehouse || '';
            document.getElementById('itemReorderLevel').value = editingItem.reorder_level || '';
            document.getElementById('itemSupplier').value = editingItem.supplier || '';
            document.getElementById('itemNotes').value = editingItem.condition_notes || '';
            document.getElementById('itemImage').value = editingItem.image_url || '';
            
            clearFormErrors();
            document.getElementById('itemModal').classList.remove('hidden');
        }

        function closeItemModal() {
            document.getElementById('itemModal').classList.add('hidden');
            editingItem = null;
        }

        function clearFormErrors() {
            const errorElements = document.querySelectorAll('[id$="Error"]');
            errorElements.forEach(el => el.classList.add('hidden'));
        }

        function validateItemForm() {
            let isValid = true;
            
            const itemName = document.getElementById('itemName').value.trim();
            const entity = document.getElementById('itemEntity').value;
            const quantity = document.getElementById('itemQuantity').value;
            const category = document.getElementById('itemCategory').value;
            const reorderLevel = document.getElementById('itemReorderLevel').value;
            
            if (!itemName) {
                document.getElementById('itemNameError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!entity) {
                document.getElementById('itemEntityError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!quantity || parseInt(quantity) < 0) {
                document.getElementById('itemQuantityError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!category) {
                document.getElementById('itemCategoryError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!reorderLevel || parseInt(reorderLevel) < 0) {
                document.getElementById('itemReorderLevelError').classList.remove('hidden');
                isValid = false;
            }
            
            return isValid;
        }

        function handleItemSubmit(e) {
            e.preventDefault();
            clearFormErrors();
            
            if (!validateItemForm()) return;
            
            const categorySelect = document.getElementById('itemCategory');
            const customCategoryInput = document.getElementById('customCategory');
            let category = categorySelect.value;
            
            if (category === 'custom') {
                category = customCategoryInput.value.trim();
                if (!category) {
                    document.getElementById('itemCategoryError').classList.remove('hidden');
                    return;
                }
            }
            
            const itemData = {
                sku: document.getElementById('itemSku').value.trim(),
                item_name: document.getElementById('itemName').value.trim(),
                entity: document.getElementById('itemEntity').value,
                quantity_counted: parseInt(document.getElementById('itemQuantity').value),
                unit_of_measure: document.getElementById('itemUnit').value.trim(),
                location_in_warehouse: document.getElementById('itemLocation').value.trim(),
                category: category,
                condition_notes: document.getElementById('itemNotes').value.trim(),
                last_count_date: new Date().toISOString().split('T')[0],
                reorder_level: parseInt(document.getElementById('itemReorderLevel').value),
                supplier: document.getElementById('itemSupplier').value.trim(),
                image_url: document.getElementById('itemImage').value.trim()
            };
            
            if (editingItem) {
                // Update existing item
                const index = items.findIndex(item => item.id === editingItem.id);
                items[index] = { ...itemData, id: editingItem.id };
            } else {
                // Add new item
                const newItem = { ...itemData, id: generateId() };
                items.push(newItem);
            }
            
            saveToStorage();
            updateFilteredItems();
            updateSummaryStats();
            renderInventoryTable();
            renderLowStockAlert();
            updateTransactionItemOptions();
            closeItemModal();
        }

        // Transaction handling
        function openTransactionModal() {
            document.getElementById('transactionForm').reset();
            clearTransactionErrors();
            document.getElementById('transactionModal').classList.remove('hidden');
        }

        function closeTransactionModal() {
            document.getElementById('transactionModal').classList.add('hidden');
        }

        function clearTransactionErrors() {
            document.getElementById('transactionItemError').classList.add('hidden');
            document.getElementById('transactionTypeError').classList.add('hidden');
            document.getElementById('transactionQuantityError').classList.add('hidden');
        }

        function validateTransactionForm() {
            let isValid = true;
            
            const itemId = document.getElementById('transactionItem').value;
            const type = document.getElementById('transactionType').value;
            const quantity = document.getElementById('transactionQuantity').value;
            
            if (!itemId) {
                document.getElementById('transactionItemError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!type) {
                document.getElementById('transactionTypeError').classList.remove('hidden');
                isValid = false;
            }
            
            if (!quantity || parseInt(quantity) <= 0) {
                document.getElementById('transactionQuantityError').classList.remove('hidden');
                isValid = false;
            }
            
            return isValid;
        }

        function handleTransactionSubmit(e) {
            e.preventDefault();
            clearTransactionErrors();
            
            if (!validateTransactionForm()) return;
            
            const itemId = document.getElementById('transactionItem').value;
            const type = document.getElementById('transactionType').value;
            const quantity = parseInt(document.getElementById('transactionQuantity').value);
            const notes = document.getElementById('transactionNotes').value.trim();
            
            // Find the item and update its quantity
            const itemIndex = items.findIndex(item => item.id === itemId);
            if (itemIndex === -1) return;
            
            const item = items[itemIndex];
            
            if (type === 'put_in') {
                item.quantity_counted += quantity;
            } else if (type === 'take_out') {
                item.quantity_counted = Math.max(0, item.quantity_counted - quantity);
            }
            
            item.last_count_date = new Date().toISOString().split('T')[0];
            
            // Record the transaction
            const transaction = {
                id: generateId(),
                itemId: itemId,
                type: type,
                quantity: quantity,
                notes: notes,
                date: new Date().toISOString().split('T')[0]
            };
            
            transactions.push(transaction);
            
            saveToStorage();
            updateFilteredItems();
            updateSummaryStats();
            renderInventoryTable();
            renderTransactionHistory();
            renderLowStockAlert();
            closeTransactionModal();
        }

        // Delete handling
        function openDeleteModal(itemId) {
            deleteItemId = itemId;
            const item = items.find(i => i.id === itemId);
            if (!item) return;
            
            document.getElementById('deleteItemName').textContent = item.item_name;
            document.getElementById('deleteModal').classList.remove('hidden');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.add('hidden');
            deleteItemId = null;
        }

        function confirmDelete() {
            if (!deleteItemId) return;
            
            const index = items.findIndex(item => item.id === deleteItemId);
            if (index !== -1) {
                items.splice(index, 1);
                saveToStorage();
                updateFilteredItems();
                updateSummaryStats();
                renderInventoryTable();
                renderLowStockAlert();
                updateTransactionItemOptions();
            }
            
            closeDeleteModal();
        }

        // Sorting
        function handleSort(field) {
            if (sortField === field) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortField = field;
                sortDirection = 'asc';
            }
            
            updateFilteredItems();
            renderInventoryTable();
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Login
            document.getElementById('loginBtn').addEventListener('click', handleLogin);
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleLogin();
            });
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            
            // Search
            document.getElementById('searchInput').addEventListener('input', function() {
                updateFilteredItems();
                renderInventoryTable();
            });
            
            // Add item
            document.getElementById('addItemBtn').addEventListener('click', openAddForm);
            
            // Transaction
            document.getElementById('transactionBtn').addEventListener('click', openTransactionModal);
            
            // Item form
            document.getElementById('itemForm').addEventListener('submit', handleItemSubmit);
            document.getElementById('cancelBtn').addEventListener('click', closeItemModal);
            
            // Transaction form
            document.getElementById('transactionForm').addEventListener('submit', handleTransactionSubmit);
            document.getElementById('cancelTransactionBtn').addEventListener('click', closeTransactionModal);
            
            // Category change
            document.getElementById('itemCategory').addEventListener('change', function() {
                const customInput = document.getElementById('customCategory');
                if (this.value === 'custom') {
                    customInput.classList.remove('hidden');
                    customInput.required = true;
                } else {
                    customInput.classList.add('hidden');
                    customInput.required = false;
                }
            });
            
            // Delete modal
            document.getElementById('confirmDeleteBtn').addEventListener('click', confirmDelete);
            document.getElementById('cancelDeleteBtn').addEventListener('click', closeDeleteModal);
            
            // Table sorting
            document.querySelectorAll('th[data-sort]').forEach(th => {
                th.addEventListener('click', function() {
                    handleSort(this.dataset.sort);
                });
            });
            
            // Modal close on overlay click
            document.getElementById('itemModal').addEventListener('click', function(e) {
                if (e.target === this) closeItemModal();
            });
            
            document.getElementById('transactionModal').addEventListener('click', function(e) {
                if (e.target === this) closeTransactionModal();
            });
            
            document.getElementById('deleteModal').addEventListener('click', function(e) {
                if (e.target === this) closeDeleteModal();
            });
        });

        // Make functions global for onclick handlers
        window.openEditForm = openEditForm;
        window.openDeleteModal = openDeleteModal;
    </script>
</body>
</html>